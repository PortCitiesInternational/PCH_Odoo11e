<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="custom_invoice_report">
		<t t-foreach="docs" t-as="o">
		    <t t-call="pch_sale.external_layout_background">
		        <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
		        <div class="page">
		            <div class="row">
		                <div name="invoice_address" class="col-xs-5 col-xs-offset-7">
		                    <address t-field="o.partner_id"
		                        t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
		                    <div t-if="o.partner_id.vat" class="mt16"><t t-esc="o.company_id.country_id.vat_label or 'TIN'"/>: <span t-field="o.partner_id.vat"/></div>
		                </div>
		            </div>

		            <h2>
		                <span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Invoice</span>
		                <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
		                <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
		                <span t-if="o.type == 'out_refund'">Credit Note</span>
		                <span t-if="o.type == 'in_refund'">Vendor Credit Note</span>
		                <span t-if="o.type == 'in_invoice'">Vendor Bill</span>
		                <span t-field="o.number"/>
		            </h2>

		            <div class="row mt32 mb32" id="information">
						<div class="col-xs-3 text-center">
							<strong>Reference/Description</strong>
							<p t-field="o.name"/>
						</div>
						<div class="col-xs-3 text-center">
							<strong>Invoice Date</strong>
							<p t-field-options='{"widget": "date"}' t-field="o.date_invoice" />
						</div>
						<div class="col-xs-3 text-center">
							<strong>Salesperson</strong>
							<p t-field="o.user_id"/>
						</div>
						<div class="col-xs-3 text-center">
							<strong>Currency</strong>
							<p t-field="o.currency_id"/>
						</div>
					</div>

		            <!-- Is there a discount on at least one line? -->
		            <t t-set="display_discount" t-value="any([l.discount for l in o.invoice_line_ids])"/>

		            <table class="table table-condensed" name="invoice_line_table">
		                <thead>
		                    <tr>
		                        <th>Description</th>
		                        <th class="hidden">Source Document</th>
		                        <th class="text-right">Quantity</th>
		                        <th class="text-right">Unit Price</th>
		                        <th t-if="display_discount" class="text-right">Disc.(%)</th>
		                        <th class="text-right">Amount</th>
		                    </tr>
		                </thead>
		                <tbody class="invoice_tbody">
		                    <tr t-foreach="o.invoice_line_ids" t-as="l">
		                        <td><span t-field="l.name"/></td>
		                        <td class="hidden"><span t-field="l.origin"/></td>
		                        <td class="text-right">
		                            <span t-field="l.quantity"/>
		                            <span t-field="l.uom_id"  groups="product.group_uom"/>
		                        </td>
		                        <td class="text-right">
		                            <span t-field="l.price_unit"/>
		                        </td>
		                        <td t-if="display_discount" class="text-right">
		                            <span t-field="l.discount"/>
		                        </td>
		                        <td class="text-right" id="subtotal">
		                            <span t-field="l.price_subtotal"
		                                t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
		                        </td>
		                    </tr>
		                </tbody>
		            </table>

		            <div class="clearfix">
		                <div id="total" class="row">
		                    <div class="col-xs-4 pull-right">
		                        <table class="table table-condensed" style="min-width: 250px;max-width: 400px;">
		                            <tr class="border-black" style="border-bottom:1px solid #dddddd;">
		                                <td><strong>Subtotal</strong></td>
		                                <td class="text-right">
		                                    <span t-field="o.amount_untaxed" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
		                                </td>
		                            </tr>
		                            <tr class="border-black">
		                                <td><strong>Total</strong></td>
		                                <td class="text-right">
		                                    <span t-field="o.amount_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
		                                </td>
		                            </tr>
		                        </table>
		                    </div>
		                </div>
		            </div>
		            
		            <div class="bottom">
		            	<div class="row" style="line-height: 10pt">
		            		<div class="col-xs-12">
		            			<p>
									<div class="col-xs-3">
										Payment Terms :
									</div>
									<div class="col-xs-9">
										<span t-field="o.payment_term_id.note"/>
									</div>
								</p>
								<br/>
								<p>
									<div class="col-xs-3">
		    							Account Number :
		    						</div>
		    						<div class="col-xs-9">
		    							<span t-field="o.bank_account.bank_acc_number"/>
		    						</div>
		    					</p>
		    					<br/>
		    					<p>
            						<div class="col-xs-3">
            							Account Name :
            						</div>
            						<div class="col-xs-9">
            							<span t-field="o.bank_account.sequence_id.name"/>
            						</div>
            					</p>
            					<br/>
            					<p>
            						<div class="col-xs-3">
            							Benificiary Bank :
            						</div>
            						<div class="col-xs-9">
            							<span t-field="o.bank_account.bank_id.name"/>
            						</div>
            					</p>
            					<br/>
            					<p>
            						<div class="col-xs-3">
            							SWIFT Code :
            						</div>	
            						<div class="col-xs-9">
            							<span t-field="o.bank_account.bank_id.bic"/>
            						</div>
            					</p>
            					<br/>
            					<p t-if="o.comment">
            						<div class="col-xs-3">
            							Notes :
            						</div>
            						<div class="col-xs-9">
            							<span t-field="o.comment"/>
            						</div>	
            					</p>
		            		</div>
		            	</div>
		            </div>
		        </div>
		    </t>
		</t>
    </template>
	
	<template id="external_layout_background">
		<t t-foreach="docs" t-as="o">
        <div class="header o_background_header_pch">
            <div class="pull-right">
                <h3 class="mt0 text-right" t-field="o.company_id.report_header"/>
            </div>
            <div align="middle">
            	<img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)" class="text-center" />
            </div>
            <div class="clearfix mb8"/>
        </div>

        <div class="article o_report_layout_background">
            <t t-raw="0" />
        </div>

        <div class="footer o_background_footer">
            <div class="text-center">
                <ul class="list-inline">
                    <li t-if="o.company_id.phone"><i class="fa fa-phone"/> <span t-field="o.company_id.phone"/></li>
                    <li t-if="o.company_id.email"><i class="fa fa-at"/> <span t-field="o.company_id.email"/></li>
                    <li t-if="o.company_id.website"><i class="fa fa-globe"/> <span t-field="o.company_id.website"/></li>
                    <li t-if="o.company_id.vat"><i class="fa fa-building-o"/><t t-esc="o.company_id.country_id.vat_label or 'TIN'"/>: <span t-field="company.vat"/></li>
                </ul>
                <div t-field="o.company_id.report_footer"/>
                <div class="text-center">
                	<span t-field="o.company_id.name"/>
                	-
                	<span t-field="o.company_id.street"/>
                	<span t-field="o.company_id.street2"/>
                	<span t-field="o.company_id.city"/>,
                	<span t-field="o.company_id.country_id.name"/>
                </div>
                <div class="text-muted">
                    Page:
                    <span class="page"/>
                    of
                    <span class="topage"/>
                </div>
            </div>
        </div>
        </t>
    </template>

</odoo>
